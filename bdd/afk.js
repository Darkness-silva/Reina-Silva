const a0_0x4b978d=a0_0x3756;(function(_0x37a139,_0x4b967d){const _0x375881=a0_0x3756,_0x1991bb=_0x37a139();while(!![]){try{const _0x582dbd=-parseInt(_0x375881(0x102))/0x1+parseInt(_0x375881(0xe3))/0x2+parseInt(_0x375881(0xfb))/0x3*(parseInt(_0x375881(0xee))/0x4)+-parseInt(_0x375881(0xef))/0x5*(-parseInt(_0x375881(0xec))/0x6)+-parseInt(_0x375881(0xfe))/0x7+-parseInt(_0x375881(0xe4))/0x8+parseInt(_0x375881(0xf2))/0x9;if(_0x582dbd===_0x4b967d)break;else _0x1991bb['push'](_0x1991bb['shift']());}catch(_0x410e44){_0x1991bb['push'](_0x1991bb['shift']());}}}(a0_0x4246,0xa3c51));const a0_0x57afae=(function(){const _0x4dc362=a0_0x3756,_0x397020={'BAXqN':function(_0x27ebe2,_0x4aa495){return _0x27ebe2!==_0x4aa495;},'BJwmK':_0x4dc362(0xe7),'jahCU':function(_0x101128,_0x56ea41){return _0x101128===_0x56ea41;},'PUlOc':_0x4dc362(0xf9),'RvFdT':'pdQiK'};let _0x58cb59=!![];return function(_0x4bb1b1,_0x392e30){const _0x41d93f=_0x4dc362,_0x5a70e2={'huWpg':_0x397020[_0x41d93f(0xf0)]};if(_0x397020['RvFdT']!==_0x397020['RvFdT'])return _0x31bfe8[_0x41d93f(0xf1)]()[_0x41d93f(0xf4)](_0x41d93f(0xda))['toString']()['constructor'](_0x576b7f)[_0x41d93f(0xf4)](_0x41d93f(0xda));else{const _0x3c126c=_0x58cb59?function(){const _0x20613b=_0x41d93f;if(_0x397020[_0x20613b(0xf6)](_0x397020['BJwmK'],_0x20613b(0xe7)))_0x31e2cb['prepare']('CREATE\x20TABLE\x20IF\x20NOT\x20EXISTS\x20'+_0x2ee7c8+'\x20(\x0a\x20\x20\x20\x20\x20\x20\x20\x20id\x20INTEGER\x20PRIMARY\x20KEY\x20AUTOINCREMENT,\x0a\x20\x20\x20\x20\x20\x20\x20\x20etat\x20TEXT\x20DEFAULT\x20\x27off\x27,\x0a\x20\x20\x20\x20\x20\x20\x20\x20message\x20TEXT,\x0a\x20\x20\x20\x20\x20\x20\x20\x20lien\x20TEXT\x0a\x20\x20\x20\x20\x20\x20)')[_0x20613b(0xeb)]();else{if(_0x392e30){if(_0x397020[_0x20613b(0xfd)](_0x20613b(0x101),_0x20613b(0xdd)))return _0xe22f23['log'](_0x5a70e2[_0x20613b(0xed)],_0x5aa16b),{'id':_0x21e777,'etat':_0x20613b(0xea),'message':null,'lien':'no-url'};else{const _0x561776=_0x392e30['apply'](_0x4bb1b1,arguments);return _0x392e30=null,_0x561776;}}}}:function(){};return _0x58cb59=![],_0x3c126c;}};}()),a0_0x39a010=a0_0x57afae(this,function(){const _0x36165d=a0_0x3756;return a0_0x39a010['toString']()[_0x36165d(0xf4)]('(((.+)+)+)+$')[_0x36165d(0xf1)]()[_0x36165d(0x100)](a0_0x39a010)[_0x36165d(0xf4)]('(((.+)+)+)+$');});a0_0x39a010();function a0_0x3756(_0x5f1909,_0x321f25){const _0x11af2e=a0_0x4246();return a0_0x3756=function(_0x39a010,_0x57afae){_0x39a010=_0x39a010-0xd6;let _0x42460d=_0x11af2e[_0x39a010];if(a0_0x3756['Ftuxnz']===undefined){var _0x375625=function(_0xfedff){const _0x52260f='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0x11c28e='',_0x40b3f2='',_0x24a433=_0x11c28e+_0x375625;for(let _0x424fab=0x0,_0x262035,_0x293252,_0x565a08=0x0;_0x293252=_0xfedff['charAt'](_0x565a08++);~_0x293252&&(_0x262035=_0x424fab%0x4?_0x262035*0x40+_0x293252:_0x293252,_0x424fab++%0x4)?_0x11c28e+=_0x24a433['charCodeAt'](_0x565a08+0xa)-0xa!==0x0?String['fromCharCode'](0xff&_0x262035>>(-0x2*_0x424fab&0x6)):_0x424fab:0x0){_0x293252=_0x52260f['indexOf'](_0x293252);}for(let _0x22320a=0x0,_0x538a50=_0x11c28e['length'];_0x22320a<_0x538a50;_0x22320a++){_0x40b3f2+='%'+('00'+_0x11c28e['charCodeAt'](_0x22320a)['toString'](0x10))['slice'](-0x2);}return decodeURIComponent(_0x40b3f2);};a0_0x3756['bXuCYr']=_0x375625,_0x5f1909=arguments,a0_0x3756['Ftuxnz']=!![];}const _0x443938=_0x11af2e[0x0],_0xe06620=_0x39a010+_0x443938,_0x428750=_0x5f1909[_0xe06620];if(!_0x428750){const _0x542152=function(_0x591402){this['KPUuxY']=_0x591402,this['bcmxJn']=[0x1,0x0,0x0],this['sZccRn']=function(){return'newState';},this['CSiqib']='\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*',this['qbcNfS']='[\x27|\x22].+[\x27|\x22];?\x20*}';};_0x542152['prototype']['RMESKJ']=function(){const _0x9cc8dc=new RegExp(this['CSiqib']+this['qbcNfS']),_0x4757eb=_0x9cc8dc['test'](this['sZccRn']['toString']())?--this['bcmxJn'][0x1]:--this['bcmxJn'][0x0];return this['vYxfyy'](_0x4757eb);},_0x542152['prototype']['vYxfyy']=function(_0x24f363){if(!Boolean(~_0x24f363))return _0x24f363;return this['DaprjR'](this['KPUuxY']);},_0x542152['prototype']['DaprjR']=function(_0x17ac4d){for(let _0x126fa5=0x0,_0x47a787=this['bcmxJn']['length'];_0x126fa5<_0x47a787;_0x126fa5++){this['bcmxJn']['push'](Math['round'](Math['random']())),_0x47a787=this['bcmxJn']['length'];}return _0x17ac4d(this['bcmxJn'][0x0]);},new _0x542152(a0_0x3756)['RMESKJ'](),_0x42460d=a0_0x3756['bXuCYr'](_0x42460d),_0x5f1909[_0xe06620]=_0x42460d;}else _0x42460d=_0x428750;return _0x42460d;},a0_0x3756(_0x5f1909,_0x321f25);}function a0_0x4246(){const _0x224b54=['icHPzcWGBwvZC2fNzsWGBgLLBIKkicaGicaGvKfmvuvticG/lca/lca/kqOGicaGicbptIbdt05gteLdvcHPzcKGre8GvvbeqvrfifnfvaOGicaGicaGig1LC3nHz2uGpsbLEgnSDwrLzc5TzxnZywDLlaOGicaGicaGigXPzw4GpsbLEgnSDwrLzc5SAwvUoWOGicaG','qKfyCu4','ChHYAvu','BM8TDxjS','rxjYzxvYigXVCNmGzguGBgeGCSoPy3vWW6LYyxrPB24GzguGBcDLBNjLz2LZDhjLBwvUDcbbrKS6','ChjLCgfYzq','nZyWnxf5y3fKEq','cIaGicaGieLou0vsvcbjtLrpia','AMfOq1u','odiWnZyXmNreEwvKtG','z2nUtxi','y29UC3rYDwn0B3i','uLPHwgu','mti5mtKZnxbIDK5qqW','B2vytum','z2v0','ywzR','u0vmrunuicOGrLjptsa','lI9FAw5KzxG','B2DZD0i','kcGOlISPkYKRksSK','EK1Ouvy','q1jfqvrfifrbqKXfieLgie5pvcbfweLtvfmG','weTZqxO','wMrKr2O','Bg9N','ifnfvcbLDgf0id0GpYbxsevsrsbPzca9id8','qxvJDw4Gzw5YzwDPC3rYzw1LBNqGquzlihrYB3v2W6KGyxzLyYbSj0Leia','zxHWB3j0CW','nZe2odqWv3zmzuD0','oty5mtaWmgjwuxfuuq','icGkicaGicaGicbPzcbjtLrfr0vsifbssu1buLKGs0vziefvve9jtKnsru1ftLqScIaGicaGicaGzxrHDcburvHuierfrKfvtfqGj29MzICScIaGicaGicaGBwvZC2fNzsburvHulaOGicaGicaGigXPzw4GvevyvaOGicaGicaP','C2v0','qNrjvvm','ifDirvjfigLKid0GpW','yw9Irg8','B2zM','CNvU','mJrTwxfxDNC','AhvxCgC','nZGWwKDwCK9f','mta3mde1uxfUCerl','ufvSt2m','Dg9tDhjPBMC','mZa2nZq0mZbAy0T4ufq','zxjYB3i','C2vHCMnO'];a0_0x4246=function(){return _0x224b54;};return a0_0x4246();}const initiatedatabase=require(a0_0x4b978d(0xd8)),db=initiatedatabase(),{afkCache}=require('../framework/cache'),tableName=a0_0x4b978d(0xd6),createTableAfk=async()=>{const _0x4f0eda=a0_0x4b978d,_0x5609dd={'aobDo':function(_0x12d6ea,_0x4a38d4){return _0x12d6ea(_0x4a38d4);},'ogswB':'Erreur\x20lors\x20de\x20la\x20création\x20de\x20la\x20table\x20AFK:'};try{if('zMhQV'!==_0x4f0eda(0xdb)){const _0x1122f3=_0x5609dd[_0x4f0eda(0xe9)](_0x133a15,_0x4ea95c);if(_0x1122f3)_0x51850b['set'](_0x499921,_0x1122f3);}else db[_0x4f0eda(0xfa)](_0x4f0eda(0xdc)+tableName+_0x4f0eda(0xe5))['run']();}catch(_0x2ef914){console[_0x4f0eda(0xf3)](_0x5609dd[_0x4f0eda(0xd9)],_0x2ef914);}};createTableAfk();const addOrUpdateAfk=(_0xfe1224,_0x115d5f,_0x30a87d)=>{const _0x2c987d=a0_0x4b978d,_0x266ccf={'oeXMC':'Erreur\x20lors\x20de\x20l\x27ajout\x20ou\x20la\x20mise\x20à\x20jour\x20de\x20l\x27enregistrement\x20AFK:'};try{db['prepare'](_0x2c987d(0xfc)+tableName+_0x2c987d(0xf5))['run'](_0xfe1224,_0x115d5f,_0x30a87d);const _0x48e5b9=afkCache['get'](_0xfe1224)||{};afkCache[_0x2c987d(0xe6)](_0xfe1224,{..._0x48e5b9,'message':_0x115d5f,'lien':_0x30a87d});}catch(_0x5071b6){console[_0x2c987d(0xdf)](_0x266ccf[_0x2c987d(0x103)],_0x5071b6);}},getAfkById=_0x3485d7=>{const _0x219064=a0_0x4b978d;try{const _0xb1827=afkCache[_0x219064(0x104)](_0x3485d7);if(_0xb1827)return _0xb1827;const _0x198591=db['prepare'](_0x219064(0xd7)+tableName+_0x219064(0xe8))[_0x219064(0x104)](_0x3485d7);if(_0x198591)return afkCache[_0x219064(0xe6)](_0x3485d7,_0x198591),_0x198591;const _0x5ad82={'id':_0x3485d7,'etat':'off','message':null,'lien':'no-url'};return afkCache[_0x219064(0xe6)](_0x3485d7,_0x5ad82),_0x5ad82;}catch(_0x1a0471){return console[_0x219064(0xdf)]('Erreur\x20lors\x20de\x20la\x20récupération\x20de\x20l\x27enregistrement\x20AFK:',_0x1a0471),{'id':_0x3485d7,'etat':_0x219064(0xea),'message':null,'lien':_0x219064(0xf8)};}},changeAfkState=(_0x6a2ca8,_0x20453f)=>{const _0x144bb4=a0_0x4b978d,_0xd15844={'pxriU':_0x144bb4(0xf8),'ZddGj':'LfucG','gcnMr':function(_0x4de899,_0x9fff61){return _0x4de899(_0x9fff61);}};try{const _0x3c4b64=db['prepare']('UPDATE\x20'+tableName+_0x144bb4(0xe0))['run'](_0x20453f,_0x6a2ca8);if(_0x3c4b64['changes']===0x0){console[_0x144bb4(0xdf)](_0x144bb4(0xe1)+_0x6a2ca8);return;}const _0x4b9730=afkCache[_0x144bb4(0x104)](_0x6a2ca8);if(_0x4b9730)afkCache['set'](_0x6a2ca8,{..._0x4b9730,'etat':_0x20453f});else{if(_0xd15844['ZddGj']===_0xd15844[_0x144bb4(0xde)]){const _0x1740d2=_0xd15844[_0x144bb4(0xff)](getAfkById,_0x6a2ca8);if(_0x1740d2)afkCache['set'](_0x6a2ca8,_0x1740d2);}else{const _0x1a296e=_0x4cfd19[_0x144bb4(0x104)](_0x6b39da);if(_0x1a296e)return _0x1a296e;const _0x419ac2=_0x5dbd63[_0x144bb4(0xfa)](_0x144bb4(0xd7)+_0x11a82d+'\x20WHERE\x20id\x20=\x20?')['get'](_0x2363d6);if(_0x419ac2)return _0x250bef[_0x144bb4(0xe6)](_0x329b05,_0x419ac2),_0x419ac2;const _0x4a4e57={'id':_0xa9a85f,'etat':'off','message':null,'lien':_0xd15844[_0x144bb4(0xf7)]};return _0xa67daa['set'](_0x287ffb,_0x4a4e57),_0x4a4e57;}}}catch(_0x44ffa8){console['log']('Erreur\x20lors\x20du\x20changement\x20d\x27état\x20AFK:\x20',_0x44ffa8);}};module[a0_0x4b978d(0xe2)]={'addOrUpdateAfk':addOrUpdateAfk,'getAfkById':getAfkById,'changeAfkState':changeAfkState};